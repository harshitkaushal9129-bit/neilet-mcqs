<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIELIT MCQ Practice Set 2026 | O Level & CCC Elite Portal</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    
    <style>
        :root { --primary: #6366f1; --success: #10b981; --danger: #f43f5e; --dark: #0f172a; --bg: #f1f5f9; }
        * { box-sizing: border-box; font-family: 'Outfit', sans-serif; transition: 0.3s; }
        
        /* Animated Gradient Background for Login */
        body { 
            background: linear-gradient(-45deg, #f1f5f9, #e2e8f0, #dee2ff, #f1f5f9);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; 
        }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .exam-header { width: 100%; max-width: 1100px; background: var(--dark); color: white; padding: 15px 25px; border-radius: 15px; margin-bottom: 20px; display: none; justify-content: space-between; align-items: center; box-shadow: 0 10px 15px rgba(0,0,0,0.1); }
        .user-info { display: flex; align-items: center; gap: 10px; font-weight: 600; }
        .dot { height: 10px; width: 10px; background-color: #22c55e; border-radius: 50%; display: inline-block; animation: blink 1.5s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        .container { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); width: 100%; max-width: 1100px; padding: 30px; border: 1px solid rgba(255,255,255,0.5); }
        .hidden { display: none !important; }

        /* Login Specific Styling */
        .login-card { max-width: 450px; margin: 40px auto; text-align: center; padding: 20px; }
        .logo-circle { width: 80px; height: 80px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; box-shadow: 0 10px 20px rgba(99,102,241,0.3); animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        
        .login-input { width:100%; padding:18px; border-radius:15px; border:2px solid #e2e8f0; margin-bottom:20px; outline:none; font-size: 16px; background: white; }
        .login-input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(99,102,241,0.1); }

        /* Rest of your styles */
        .quiz-wrapper { display: flex; gap: 30px; margin-top: 20px; }
        .main-quiz-area { flex: 1; }
        .right-sidebar { width: 280px; background: #f8fafc; padding: 20px; border-radius: 20px; border: 1px solid #e2e8f0; height: fit-content; position: sticky; top: 20px; }
        @media (max-width: 900px) { .quiz-wrapper { flex-direction: column; } .right-sidebar { width: 100%; } }
        .p-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 15px; }
        .p-btn { aspect-ratio: 1; border-radius: 10px; border: 1px solid #cbd5e1; background: white; cursor: pointer; font-weight: 700; display: flex; align-items: center; justify-content: center; font-size: 14px; }
        .p-btn.done { background: var(--success); color: white; border: none; }
        .p-btn.active { background: var(--primary); color: white; transform: scale(1.1); box-shadow: 0 4px 12px rgba(99,102,241,0.3); }
        .q-card { background: #fff; padding: 30px; border-radius: 20px; border: 1px solid #f1f5f9; min-height: 300px; margin-bottom: 20px; }
        .q-text { font-size: 22px; font-weight: 600; color: var(--dark); margin-bottom: 25px; line-height: 1.5; white-space: pre-wrap; }
        .opt { padding: 18px; border: 2px solid #f1f5f9; border-radius: 15px; background: white; cursor: pointer; text-align: left; font-size: 17px; margin-bottom: 12px; width: 100%; display: block; }
        .opt:hover { border-color: var(--primary); background: #f5f3ff; }
        .opt.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .btn { padding: 14px 28px; border-radius: 12px; border: none; cursor: pointer; font-weight: 700; display: flex; align-items: center; gap: 8px; justify-content: center; text-decoration: none; }
        .btn-pri { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(99,102,241,0.3); }
        .btn-pri:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(99,102,241,0.4); }
        .donate-box { margin: 25px 0; padding: 25px; border: 2px dashed var(--primary); border-radius: 25px; background: #f8fafc; text-align: center; }
        .qr-img { width: 220px; height: 220px; border: 10px solid white; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); margin: 15px auto; }
        .f-btn { padding: 10px 15px; border-radius: 8px; border: 1px solid #ddd; cursor: pointer; background: white; }
        .active-all { border-color: var(--primary); color: var(--primary); background: #f5f3ff; }
    </style>
</head>
<body oncontextmenu="return false;">

<div id="header-bar" class="exam-header">
    <div class="user-info">
        <span class="dot"></span>
        <span id="display-u-name">Student</span>
    </div>
    <div style="font-family:'Montserrat'; font-weight:700; letter-spacing:1px;">O-LEVEL ELITE PORTAL</div>
    <div id="display-mod" style="color:var(--success);">Module: --</div>
</div>

<div class="container">
    <div id="scr-login" class="login-card">
        <div class="logo-circle">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path></svg>
        </div>
        <h1 style="color:var(--dark); font-family:'Montserrat'; font-size: 2.2rem; margin: 0;">O-LEVEL <span style="color:var(--primary)">ELITE</span></h1>
        <p style="color: #64748b; margin-top: 5px; margin-bottom: 30px; font-weight: 400;">The ultimate NIELIT practice destination</p>
        
        <div style="text-align: left; margin-bottom: 10px; margin-left: 5px; font-weight: 600; color: var(--dark);">Student Name</div>
        <input type="text" id="u-name" class="login-input" placeholder="e.g. Harshit Kaushal">
        
        <button class="btn btn-pri" style="width:100%; font-size: 1.1rem; padding: 18px;" onclick="goModules()">
            Access Portal &nbsp; ➔
        </button>
        
        <p style="margin-top: 25px; font-size: 0.85rem; color: #94a3b8;">Latest 2026 Exam Pattern Updates Applied</p>
    </div>

    <div id="scr-ins" class="hidden">
        <h2 style="text-align:center; font-family:'Montserrat';">Select Paper Module</h2>
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-top:20px;">
            <div onclick="start('M1')" class="btn" style="background:white; border:1px solid #ddd; color:var(--dark); height:110px; flex-direction:column;"><b>M1</b><span>IT Tools</span></div>
            <div onclick="start('M2')" class="btn" style="background:white; border:1px solid #ddd; color:var(--dark); height:110px; flex-direction:column;"><b>M2</b><span>Web Design</span></div>
            <div onclick="start('M3')" class="btn" style="background:white; border:1px solid #ddd; color:var(--dark); height:110px; flex-direction:column;"><b>M3</b><span>Python</span></div>
            <div onclick="start('M4')" class="btn" style="background:white; border:1px solid #ddd; color:var(--dark); height:110px; flex-direction:column;"><b>M4</b><span>IoT</span></div>
        </div>
    </div>

    <div id="scr-quiz" class="hidden">
        <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #eee; padding-bottom:15px;">
            <span id="mod-label" style="font-weight:700; color:var(--primary);"></span>
            <div style="background:#fee2e2; color:var(--danger); padding:8px 15px; border-radius:12px; font-weight:700;">⏱ <span id="clock">30:00</span></div>
        </div>
        <div class="quiz-wrapper">
            <div class="main-quiz-area">
                <div class="q-card"><div class="q-text" id="q-text">Loading Questions...</div><div id="opt-box"></div></div>
                <div style="display:flex; justify-content:space-between; gap:10px;">
                    <button class="btn" style="background:#e2e8f0;" id="b-prev" onclick="nav(-1)">Previous</button>
                    <button class="btn btn-pri" id="b-next" onclick="nav(1)">Next</button>
                </div>
                <button class="btn" style="background:var(--danger); color:white; width:100%; margin-top:15px;" onclick="finish()">Submit Exam</button>
            </div>
            <div class="right-sidebar">
                <h4 style="margin-top:0;">Question Palette</h4>
                <div class="p-grid" id="p-grid"></div>
            </div>
        </div>
    </div>

    <div id="scr-res" class="hidden" style="text-align:center;">
        <h2 style="margin:0;">Final Result</h2>
        <div id="r-grade" style="font-size:70px; font-weight:800; color:var(--primary); margin:10px 0;">S</div>
        <h3 id="r-score" style="margin-top:-10px;">Score: 0 / 25</h3>

        <div class="donate-box">
            <h4 style="margin:0; color:var(--primary);">☕ Support developer's Work</h4>
            <img class="qr-img" src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=upi://pay?pa=mandavikaushal913@okaxis%26pn=MANDAVI%26cu=INR" alt="UPI QR">
            <p style="font-weight:600;">Scan to Donate | </p>
            <a href="upi://pay?pa=mandavikaushal913@okaxis&pn=MANDAVI&cu=INR" class="btn" style="background:#22c55e; color:white; width:220px; margin:auto;">Click to Pay</a>
        </div>

        <div style="display:flex; justify-content:center; gap:10px; margin:25px 0;">
            <button id="f-all" class="f-btn active-all" onclick="filterReview('all')">All</button>
            <button id="f-correct" class="f-btn" onclick="filterReview('correct')">Correct ✅</button>
            <button id="f-wrong" class="f-btn" onclick="filterReview('wrong')">Wrong ❌</button>
        </div>
        <div id="rev-list" style="text-align:left; background:#f8fafc; padding:20px; border-radius:20px; max-height:350px; overflow-y:auto; border:1px solid #eee;"></div>
        <button class="btn btn-pri" style="width:100%; margin-top:25px;" onclick="location.reload()">Restart Portal</button>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import { getDatabase, ref, get, push } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBtK_ABh5RiHV_lX-WZ8FLbVxq7Rh93q_0",
        authDomain: "o-level-quiz-f2545.firebaseapp.com",
        projectId: "o-level-quiz-f2545",
        databaseURL: "https://o-level-quiz-f2545-default-rtdb.firebaseio.com",
        appId: "1:764630053537:web:d8b2573ebf6c47761936e0"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    let qs = [], ans = {}, cur = 0, mod = "", timer, timeLeft = 1800, reviewData = [];

    const safeHTML = (str) => { const div = document.createElement('div'); div.textContent = str; return div.innerHTML; };

    function openFullscreen() {
        const elem = document.documentElement;
        if (elem.requestFullscreen) { elem.requestFullscreen(); }
        else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
        else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
    }

    document.addEventListener('keydown', function(e) {
        if (e.key === "F12" || (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J" || e.key === "C")) || (e.ctrlKey && e.key === "U")) {
            e.preventDefault();
            alert("Security: Developer Tools disabled!");
            return false;
        }
    });

    window.goModules = () => { 
        const name = document.getElementById('u-name').value.trim();
        if(name) { 
            openFullscreen(); 
            document.getElementById('display-u-name').innerText = name;
            document.getElementById('header-bar').style.display = 'flex';
            hide(); 
            document.getElementById('scr-ins').classList.remove('hidden'); 
        } else alert("Naam likhna zaroori hai!"); 
    };

    window.start = async (m) => {
        mod = m; const snap = await get(ref(db, `quizzes/${m}`));
        if(snap.exists()) {
            document.getElementById('display-mod').innerText = "Module: " + m;
            qs = snap.val(); hide(); document.getElementById('scr-quiz').classList.remove('hidden');
            document.getElementById('mod-label').innerText = "Paper: " + m;
            startClock(); buildPal(); render();
        } else { alert("Is module mein sawal nahi hain!"); location.reload(); }
    };

    function startClock() { timer = setInterval(() => { timeLeft--; let m = Math.floor(timeLeft/60), s = timeLeft%60; document.getElementById('clock').innerText = `${m}:${s<10?'0':''}${s}`; if(timeLeft <= 0) finish(); }, 1000); }

    function buildPal() { const p = document.getElementById('p-grid'); p.innerHTML = ''; qs.forEach((_, i) => { const b = document.createElement('button'); b.className = 'p-btn'; b.id = `p-${i}`; b.innerText = i+1; b.onclick = () => { cur = i; render(); }; p.appendChild(b); }); }

    function render() {
        const q = qs[cur]; document.getElementById('q-text').innerHTML = `${cur+1}. ${safeHTML(q.text)}`;
        const box = document.getElementById('opt-box'); box.innerHTML = '';
        q.options.forEach(o => { const btn = document.createElement('button'); btn.className = `opt ${ans[cur] === o ? 'selected' : ''}`; btn.innerHTML = safeHTML(o); btn.onclick = () => { ans[cur] = o; updateUI(); render(); }; box.appendChild(btn); });
        updateUI();
        document.getElementById('b-prev').style.visibility = cur === 0 ? 'hidden' : 'visible';
        document.getElementById('b-next').style.visibility = cur === qs.length-1 ? 'hidden' : 'visible';
    }

    function updateUI() { document.querySelectorAll('.p-btn').forEach((b, i) => { b.classList.remove('active', 'done'); if(i === cur) b.classList.add('active'); if(ans[i]) b.classList.add('done'); }); }

    window.nav = (s) => { cur += s; render(); };

    window.finish = async () => {
        if(timeLeft > 0 && !confirm("Final Submit?")) return;
        clearInterval(timer); let score = 0; reviewData = [];
        qs.forEach((q, i) => { const isC = ans[i] === q.answer; if(isC) score++; reviewData.push({ text: q.text, userAns: ans[i]||'N/A', correctAns: q.answer, isCorrect: isC }); });
        const per = (score/qs.length)*100;
        let g = per>=85?'S':per>=75?'A':per>=65?'B':per>=55?'C':per>=50?'D':'F';
        if(g === 'S' || g === 'A') confetti();
        document.getElementById('r-score').innerText = `Score: ${score} / ${qs.length}`;
        document.getElementById('r-grade').innerText = g;
        hide(); document.getElementById('scr-res').classList.remove('hidden'); filterReview('all');
        document.getElementById('header-bar').style.display = 'none';
        if (document.exitFullscreen) { document.exitFullscreen(); }
    };

    window.filterReview = (type) => {
        const box = document.getElementById('rev-list'); box.innerHTML = '';
        reviewData.forEach((item, i) => {
            if(type === 'all' || (type === 'correct' && item.isCorrect) || (type === 'wrong' && !item.isCorrect)) {
                box.innerHTML += `<div style="padding:12px; margin-bottom:10px; border-left:5px solid ${item.isCorrect?'#10b981':'#f43f5e'}; background:white; border-radius:8px; border:1px solid #eee;">
                    <b>Q${i+1}: ${safeHTML(item.text)}</b><br>
                    <span>Your Ans: <span style="color:${item.isCorrect?'green':'red'}">${safeHTML(item.userAns)}</span></span> | 
                    <span>Correct: <span style="color:green">${safeHTML(item.correctAns)}</span></span>
                </div>`;
            }
        });
        document.querySelectorAll('.f-btn').forEach(b => b.classList.remove('active-all'));
        document.getElementById('f-'+type).classList.add('active-all');
    };

    function hide() { ['scr-login','scr-ins','scr-quiz','scr-res'].forEach(id => document.getElementById(id).classList.add('hidden')); }
</script>
</body>
</html>
